import{d as te,y,Y as oe,c as g,a as r,b as l,w as t,r as p,l as _,u as C,n as ne,Z as ue,H as de,Q as se,t as i,v as re,x as H,C as V,F as P,k as Q,T as x,o as d,U as pe,_ as ie}from"./index-Pv0t0kya.js";const me={class:"menu-management-container"},ve={class:"operation-bar"},fe={class:"main-content"},ce={class:"menu-tree"},ye={class:"tree-node"},Ve={class:"menu-detail"},be={class:"card-header"},_e={key:0,class:"detail-content"},ke={class:"form-actions"},ge={key:1,class:"empty-detail"},he={class:"dialog-footer"},Ue=te({__name:"MenuManagement",setup(Ae){const F=y([{id:1,name:"仪表盘",type:1,path:"/dashboard",component:"views/Dashboard.vue",icon:"DataAnalysis",sort:1,visible:!0,keepAlive:!0,parentId:0,children:[]},{id:2,name:"系统管理",type:0,path:"/system",icon:"Setting",sort:2,visible:!0,redirect:"/system/user",parentId:0,children:[{id:21,name:"用户管理",type:1,path:"/system/user",component:"views/system/UserManagement.vue",icon:"User",sort:1,visible:!0,keepAlive:!0,parentId:2,children:[]},{id:22,name:"菜单管理",type:1,path:"/system/menu",component:"views/system/MenuManagement.vue",icon:"Menu",sort:2,visible:!0,keepAlive:!0,parentId:2,children:[]},{id:23,name:"角色管理",type:1,path:"/system/role",component:"views/system/RoleManagement.vue",icon:"UserFilled",sort:3,visible:!0,keepAlive:!0,parentId:2,children:[]}]},{id:3,name:"学生管理",type:0,path:"/student",icon:"User",sort:3,visible:!0,redirect:"/student/list",parentId:0,children:[{id:31,name:"学生列表",type:1,path:"/student/list",component:"views/student/StudentList.vue",icon:"List",sort:1,visible:!0,keepAlive:!0,parentId:3,children:[]}]}]),Y={label:"name",children:"children"},b=y(null),h=y(!1),k=y(!1),I=y(!1),D=y(),B=y(),o=y({id:0,name:"",type:0,path:"",component:"",permission:"",icon:"",sort:0,visible:!0,keepAlive:!1,redirect:"",parentId:0}),n=y({id:0,name:"",type:0,path:"",component:"",permission:"",icon:"",sort:0,visible:!0,keepAlive:!1,redirect:"",parentId:0}),R={name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"change"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],component:[{required:!0,message:"请输入组件路径",trigger:"blur"}],parentId:[{required:!0,message:"请选择上级菜单",trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]},w=y([]),T=(v,e="")=>{let f=[];for(const s of v)f.push({...s,name:e+s.name}),s.children&&s.children.length>0&&(f=f.concat(T(s.children,e+"└ ")));return f},q=()=>{w.value=T(F.value)},Z=v=>{b.value=v,h.value=!0,o.value={...v}},$=()=>{o.value.type!==1&&(o.value.keepAlive=!1),o.value.type===0?(o.value.component="",o.value.permission=""):o.value.type===2&&(o.value.component="",o.value.keepAlive=!1)},j=()=>{n.value.type!==1&&(n.value.keepAlive=!1),n.value.type===0?(n.value.component="",n.value.permission=""):n.value.type===2&&(n.value.component="",n.value.keepAlive=!1)},z=()=>{I.value=!1,N(),k.value=!0},G=()=>{I.value=!0,N(0),k.value=!0},N=(v=1)=>{n.value={id:0,name:"",type:v,path:"",component:"",permission:"",icon:"",sort:0,visible:!0,keepAlive:!1,redirect:"",parentId:0}},J=()=>{b.value&&pe.confirm("确定要删除该菜单吗？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除菜单：",b.value),x.success("删除成功"),U()}).catch(()=>{})},U=()=>{b.value=null,h.value=!1,q()},K=()=>{D.value.validate(v=>{v&&(console.log("保存菜单：",o.value),x.success("保存成功"),U())})},W=()=>{b.value=null,h.value=!1},X=()=>{B.value.validate(v=>{v&&(console.log("新增菜单：",n.value),x.success("新增成功"),k.value=!1,U())})};return oe(()=>{q()}),(v,e)=>{const f=p("el-icon"),s=p("el-button"),ee=p("el-tree"),S=p("el-card"),m=p("el-input"),u=p("el-form-item"),c=p("el-option"),A=p("el-select"),E=p("el-input-number"),M=p("el-switch"),L=p("el-form"),le=p("el-empty"),ae=p("el-dialog");return d(),g("div",me,[e[33]||(e[33]=r("h2",{class:"page-title"},"菜单管理",-1)),r("div",ve,[l(s,{type:"primary",onClick:z},{default:t(()=>[l(f,null,{default:t(()=>[l(C(ne))]),_:1}),e[24]||(e[24]=_(" 新增菜单 ",-1))]),_:1}),l(s,{type:"success",onClick:G},{default:t(()=>[l(f,null,{default:t(()=>[l(C(ue))]),_:1}),e[25]||(e[25]=_(" 新增目录 ",-1))]),_:1}),l(s,{type:"danger",onClick:J,disabled:!b.value},{default:t(()=>[l(f,null,{default:t(()=>[l(C(de))]),_:1}),e[26]||(e[26]=_(" 删除 ",-1))]),_:1},8,["disabled"]),l(s,{type:"warning",onClick:U},{default:t(()=>[l(f,null,{default:t(()=>[l(C(se))]),_:1}),e[27]||(e[27]=_(" 刷新 ",-1))]),_:1})]),r("div",fe,[r("div",ce,[l(S,{shadow:"hover",class:"tree-card"},{header:t(()=>[...e[28]||(e[28]=[r("div",{class:"card-header"},[r("span",null,"菜单结构")],-1)])]),default:t(()=>[l(ee,{data:F.value,props:Y,"default-expanded-keys":["1"],onNodeClick:Z,"highlight-current":!0,"node-key":"id"},{default:t(({node:a,data:O})=>[r("span",ye,[l(f,null,{default:t(()=>[(d(),i(re(O.type===0?"Folder":O.type===1?"Menu":"Link")))]),_:2},1024),r("span",null,H(a.label),1)])]),_:1},8,["data"])]),_:1})]),r("div",Ve,[l(S,{shadow:"hover"},{header:t(()=>[r("div",be,[r("span",null,H(b.value?h.value?"编辑菜单":"菜单详情":"请选择菜单"),1)])]),default:t(()=>[b.value?(d(),g("div",_e,[l(L,{ref_key:"menuFormRef",ref:D,model:o.value,rules:R,"label-width":"120px"},{default:t(()=>[l(u,{label:"菜单名称",prop:"name"},{default:t(()=>[l(m,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),l(u,{label:"菜单类型",prop:"type"},{default:t(()=>[l(A,{modelValue:o.value.type,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.type=a),placeholder:"请选择菜单类型",onChange:$},{default:t(()=>[l(c,{label:"目录",value:0}),l(c,{label:"菜单",value:1}),l(c,{label:"按钮",value:2})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"上级菜单",prop:"parentId"},{default:t(()=>[l(A,{modelValue:o.value.parentId,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.parentId=a),placeholder:"请选择上级菜单"},{default:t(()=>[l(c,{label:"顶级菜单",value:0}),(d(!0),g(P,null,Q(w.value,a=>(d(),i(c,{key:a.id,label:a.name,value:a.id,disabled:a.id===o.value.id},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),o.value.type!==0?(d(),i(u,{key:0,label:"路由地址",prop:"path"},{default:t(()=>[l(m,{modelValue:o.value.path,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.path=a),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})):V("",!0),o.value.type===1?(d(),i(u,{key:1,label:"组件路径",prop:"component"},{default:t(()=>[l(m,{modelValue:o.value.component,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.component=a),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})):V("",!0),o.value.type===2?(d(),i(u,{key:2,label:"权限标识",prop:"permission"},{default:t(()=>[l(m,{modelValue:o.value.permission,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.permission=a),placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1})):V("",!0),l(u,{label:"菜单图标",prop:"icon"},{default:t(()=>[l(m,{modelValue:o.value.icon,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.icon=a),placeholder:"请输入图标名称（如：User）"},null,8,["modelValue"])]),_:1}),l(u,{label:"排序",prop:"sort"},{default:t(()=>[l(E,{modelValue:o.value.sort,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.sort=a),min:0,step:1},null,8,["modelValue"])]),_:1}),l(u,{label:"是否显示",prop:"visible"},{default:t(()=>[l(M,{modelValue:o.value.visible,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.visible=a)},null,8,["modelValue"])]),_:1}),o.value.type===1?(d(),i(u,{key:3,label:"是否缓存",prop:"keepAlive"},{default:t(()=>[l(M,{modelValue:o.value.keepAlive,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.keepAlive=a)},null,8,["modelValue"])]),_:1})):V("",!0),o.value.type===0?(d(),i(u,{key:4,label:"重定向地址",prop:"redirect"},{default:t(()=>[l(m,{modelValue:o.value.redirect,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.redirect=a),placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})):V("",!0)]),_:1},8,["model"]),r("div",ke,[l(s,{type:"primary",onClick:K},{default:t(()=>[...e[29]||(e[29]=[_("保存",-1)])]),_:1}),l(s,{onClick:W},{default:t(()=>[...e[30]||(e[30]=[_("取消",-1)])]),_:1})])])):(d(),g("div",ge,[l(le,{description:"请选择一个菜单进行编辑"})]))]),_:1})])]),l(ae,{modelValue:k.value,"onUpdate:modelValue":e[23]||(e[23]=a=>k.value=a),title:I.value?"新增目录":"新增菜单",width:"600px","close-on-click-modal":!1},{footer:t(()=>[r("div",he,[l(s,{onClick:e[22]||(e[22]=a=>k.value=!1)},{default:t(()=>[...e[31]||(e[31]=[_("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:X},{default:t(()=>[...e[32]||(e[32]=[_("提交",-1)])]),_:1})])]),default:t(()=>[l(L,{ref_key:"addMenuFormRef",ref:B,model:n.value,rules:R,"label-width":"120px"},{default:t(()=>[l(u,{label:"菜单名称",prop:"name"},{default:t(()=>[l(m,{modelValue:n.value.name,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.name=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),l(u,{label:"菜单类型",prop:"type"},{default:t(()=>[l(A,{modelValue:n.value.type,"onUpdate:modelValue":e[12]||(e[12]=a=>n.value.type=a),placeholder:"请选择菜单类型",onChange:j},{default:t(()=>[l(c,{label:"目录",value:0}),l(c,{label:"菜单",value:1}),l(c,{label:"按钮",value:2})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"上级菜单",prop:"parentId"},{default:t(()=>[l(A,{modelValue:n.value.parentId,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.parentId=a),placeholder:"请选择上级菜单"},{default:t(()=>[l(c,{label:"顶级菜单",value:0}),(d(!0),g(P,null,Q(w.value,a=>(d(),i(c,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n.value.type!==0?(d(),i(u,{key:0,label:"路由地址",prop:"path"},{default:t(()=>[l(m,{modelValue:n.value.path,"onUpdate:modelValue":e[14]||(e[14]=a=>n.value.path=a),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})):V("",!0),n.value.type===1?(d(),i(u,{key:1,label:"组件路径",prop:"component"},{default:t(()=>[l(m,{modelValue:n.value.component,"onUpdate:modelValue":e[15]||(e[15]=a=>n.value.component=a),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})):V("",!0),n.value.type===2?(d(),i(u,{key:2,label:"权限标识",prop:"permission"},{default:t(()=>[l(m,{modelValue:n.value.permission,"onUpdate:modelValue":e[16]||(e[16]=a=>n.value.permission=a),placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1})):V("",!0),l(u,{label:"菜单图标",prop:"icon"},{default:t(()=>[l(m,{modelValue:n.value.icon,"onUpdate:modelValue":e[17]||(e[17]=a=>n.value.icon=a),placeholder:"请输入图标名称（如：User）"},null,8,["modelValue"])]),_:1}),l(u,{label:"排序",prop:"sort"},{default:t(()=>[l(E,{modelValue:n.value.sort,"onUpdate:modelValue":e[18]||(e[18]=a=>n.value.sort=a),min:0,step:1},null,8,["modelValue"])]),_:1}),l(u,{label:"是否显示",prop:"visible"},{default:t(()=>[l(M,{modelValue:n.value.visible,"onUpdate:modelValue":e[19]||(e[19]=a=>n.value.visible=a)},null,8,["modelValue"])]),_:1}),n.value.type===1?(d(),i(u,{key:3,label:"是否缓存",prop:"keepAlive"},{default:t(()=>[l(M,{modelValue:n.value.keepAlive,"onUpdate:modelValue":e[20]||(e[20]=a=>n.value.keepAlive=a)},null,8,["modelValue"])]),_:1})):V("",!0),n.value.type===0?(d(),i(u,{key:4,label:"重定向地址",prop:"redirect"},{default:t(()=>[l(m,{modelValue:n.value.redirect,"onUpdate:modelValue":e[21]||(e[21]=a=>n.value.redirect=a),placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})):V("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Ce=ie(Ue,[["__scopeId","data-v-206c0843"]]);export{Ce as default};
