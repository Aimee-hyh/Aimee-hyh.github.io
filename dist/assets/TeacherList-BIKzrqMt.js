import{d as de,y as p,z as ue,c as ie,a as V,b as a,w as l,r as d,B as re,l as i,u as z,n as pe,M as me,N as ce,t as ve,x as q,P as fe,q as ge,a0 as _e,a1 as he,T as h,U as E,o as I,_ as be}from"./index-Pv0t0kya.js";const we={class:"teacher-list-container"},ye={class:"toolbar-content"},Ve={class:"search-section"},Ce={class:"action-buttons"},xe={class:"pagination"},ke={class:"dialog-footer"},Te=de({__name:"TeacherList",setup(ze){const D=he(),A=p(!1),b=p(""),U=p([]),s=p({gender:"",education:"",status:"",department:""}),g=p(1),C=p(10),B=p(0),_=p([]),v=p([{id:1,name:"张老师",gender:"女",age:32,education:"本科",major:"汉语言文学",teachingYears:8,phone:"13800138001",department:"语文组",status:"在职",hireDate:"2016-09-01",email:"zhang@example.com",address:"北京市朝阳区"},{id:2,name:"李老师",gender:"男",age:35,education:"硕士",major:"数学",teachingYears:10,phone:"13800138002",department:"数学组",status:"在职",hireDate:"2014-09-01",email:"li@example.com",address:"北京市海淀区"},{id:3,name:"王老师",gender:"女",age:28,education:"本科",major:"英语",teachingYears:5,phone:"13800138003",department:"英语组",status:"请假",hireDate:"2019-09-01",email:"wang@example.com",address:"北京市西城区"},{id:4,name:"赵老师",gender:"男",age:40,education:"博士",major:"物理",teachingYears:15,phone:"13800138004",department:"综合组",status:"在职",hireDate:"2009-09-01",email:"zhao@example.com",address:"北京市丰台区"},{id:5,name:"刘老师",gender:"女",age:30,education:"硕士",major:"化学",teachingYears:7,phone:"13800138005",department:"综合组",status:"离职",hireDate:"2017-09-01",email:"liu@example.com",address:"北京市石景山区"}]),F=ue(()=>{let t=[...v.value];if(b.value){const o=b.value.toLowerCase();t=t.filter(y=>y.name.toLowerCase().includes(o)||y.phone.includes(o))}s.value.gender&&(t=t.filter(o=>o.gender===s.value.gender)),s.value.education&&(t=t.filter(o=>o.education===s.value.education)),s.value.status&&(t=t.filter(o=>o.status===s.value.status)),s.value.department&&(t=t.filter(o=>o.department===s.value.department)),B.value=t.length;const e=(g.value-1)*C.value,c=e+C.value;return t.slice(e,c)}),$=t=>({在职:"success",请假:"warning",离职:"danger"})[t]||"info",P=t=>{_.value=t.map(e=>e.id)},T=()=>{g.value=1,console.log("搜索教师：",{...s.value,searchQuery:b.value})},j=()=>{b.value="",s.value={gender:"",education:"",status:"",department:""},g.value=1,T()},K=()=>{D.push("/teacher/add")},Q=t=>{D.push(`/teacher/detail/${t.id}`)},R=t=>{D.push(`/teacher/detail/${t.id}?mode=edit`)},O=(t,e)=>{t==="status"?G(e):t==="delete"&&J(e)},w=p({id:0,status:""}),x=p(!1),m=p({status:"",reason:""}),G=t=>{w.value=t,m.value={status:t.status,reason:""},x.value=!0},H=()=>{console.log("变更状态：",w.value.id,m.value),m.value.status==="请假"&&(m.value.reason.includes("紧急")||h.warning("请假申请需提前24小时提交，紧急情况请在备注中说明"));const t=v.value.findIndex(e=>e.id===w.value.id);t!==-1&&(v.value[t].status=m.value.status,m.value.status==="离职"&&console.log(`教师${w.value.name}已离职，账号自动停用`),h.success("状态变更成功")),x.value=!1},J=t=>{E.confirm("确定要删除该教师吗？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(t.status==="在职"){h.warning("有未完成排课的教师不可直接删除档案");return}const e=v.value.findIndex(c=>c.id===t.id);e!==-1&&(v.value.splice(e,1),h.success("删除成功"))}).catch(()=>{})},L=t=>{t==="status"?h.info("批量变更状态功能开发中"):t==="delete"&&E.confirm(`确定要删除选中的${_.value.length}名教师吗？`,"删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(v.value.some(c=>_.value.includes(c.id)&&c.status==="在职")){h.warning("有未完成排课的教师不可直接删除档案");return}v.value=v.value.filter(c=>!_.value.includes(c.id)),_.value=[],h.success("批量删除成功")}).catch(()=>{})},W=t=>{C.value=t,g.value=1},X=t=>{g.value=t};return(t,e)=>{const c=d("el-input"),o=d("el-button"),y=d("el-card"),u=d("el-option"),k=d("el-select"),f=d("el-form-item"),Y=d("el-form"),Z=d("el-collapse-item"),ee=d("el-collapse"),r=d("el-table-column"),M=d("el-tag"),N=d("el-dropdown-item"),ae=d("el-dropdown-menu"),le=d("el-dropdown"),te=d("el-table"),ne=d("el-pagination"),oe=d("el-dialog"),se=ce("loading");return I(),ie("div",we,[e[28]||(e[28]=V("h2",{class:"page-title"},"教师列表",-1)),a(y,{shadow:"hover",class:"toolbar-card"},{default:l(()=>[V("div",ye,[V("div",Ve,[a(c,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=n=>b.value=n),placeholder:"请输入教师姓名或联系方式","prefix-icon":"Search",class:"search-input",onKeyup:re(T,["enter"])},null,8,["modelValue"]),a(o,{type:"primary",onClick:T},{default:l(()=>[...e[14]||(e[14]=[i("搜索",-1)])]),_:1}),a(o,{onClick:j},{default:l(()=>[...e[15]||(e[15]=[i("重置",-1)])]),_:1})]),V("div",Ce,[a(o,{type:"primary",onClick:K,icon:z(pe)},{default:l(()=>[...e[16]||(e[16]=[i(" 新增教师 ",-1)])]),_:1},8,["icon"]),a(o,{type:"warning",onClick:e[1]||(e[1]=n=>L("status")),disabled:_.value.length===0},{default:l(()=>[...e[17]||(e[17]=[i(" 批量变更状态 ",-1)])]),_:1},8,["disabled"]),a(o,{type:"danger",onClick:e[2]||(e[2]=n=>L("delete")),disabled:_.value.length===0},{default:l(()=>[...e[18]||(e[18]=[i(" 批量删除 ",-1)])]),_:1},8,["disabled"])])])]),_:1}),a(y,{shadow:"hover",class:"filter-card"},{default:l(()=>[a(ee,{modelValue:U.value,"onUpdate:modelValue":e[7]||(e[7]=n=>U.value=n)},{default:l(()=>[a(Z,{title:"高级筛选",name:"filter"},{default:l(()=>[a(Y,{model:s.value,inline:""},{default:l(()=>[a(f,{label:"性别"},{default:l(()=>[a(k,{modelValue:s.value.gender,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.gender=n),placeholder:"请选择性别"},{default:l(()=>[a(u,{label:"男",value:"男"}),a(u,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"学历"},{default:l(()=>[a(k,{modelValue:s.value.education,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.education=n),placeholder:"请选择学历"},{default:l(()=>[a(u,{label:"大专",value:"大专"}),a(u,{label:"本科",value:"本科"}),a(u,{label:"硕士",value:"硕士"}),a(u,{label:"博士",value:"博士"})]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"状态"},{default:l(()=>[a(k,{modelValue:s.value.status,"onUpdate:modelValue":e[5]||(e[5]=n=>s.value.status=n),placeholder:"请选择状态"},{default:l(()=>[a(u,{label:"在职",value:"在职"}),a(u,{label:"请假",value:"请假"}),a(u,{label:"离职",value:"离职"})]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"所属部门"},{default:l(()=>[a(k,{modelValue:s.value.department,"onUpdate:modelValue":e[6]||(e[6]=n=>s.value.department=n),placeholder:"请选择部门"},{default:l(()=>[a(u,{label:"语文组",value:"语文组"}),a(u,{label:"数学组",value:"数学组"}),a(u,{label:"英语组",value:"英语组"}),a(u,{label:"综合组",value:"综合组"})]),_:1},8,["modelValue"])]),_:1}),a(f,null,{default:l(()=>[a(o,{type:"primary",onClick:T},{default:l(()=>[...e[19]||(e[19]=[i("筛选",-1)])]),_:1}),a(o,{onClick:j},{default:l(()=>[...e[20]||(e[20]=[i("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(y,{shadow:"hover",class:"table-card"},{default:l(()=>[me((I(),ve(te,{data:F.value,style:{width:"100%"},onSelectionChange:P,stripe:"",border:""},{default:l(()=>[a(r,{type:"selection",width:"55"}),a(r,{type:"index",label:"序号",width:"60"}),a(r,{prop:"name",label:"姓名",width:"100"}),a(r,{prop:"gender",label:"性别",width:"80"}),a(r,{prop:"age",label:"年龄",width:"80"}),a(r,{prop:"education",label:"学历",width:"100"}),a(r,{prop:"major",label:"专业",width:"150"}),a(r,{prop:"teachingYears",label:"教龄",width:"80"}),a(r,{prop:"phone",label:"联系方式",width:"150"}),a(r,{prop:"department",label:"所属部门",width:"120"}),a(r,{prop:"status",label:"状态",width:"100"},{default:l(n=>[a(M,{type:$(n.row.status)},{default:l(()=>[i(q(n.row.status),1)]),_:2},1032,["type"])]),_:1}),a(r,{prop:"hireDate",label:"入职时间",width:"150"}),a(r,{label:"操作",width:"180",fixed:"right"},{default:l(n=>[a(o,{type:"primary",size:"small",onClick:S=>Q(n.row),icon:z(fe)},{default:l(()=>[...e[21]||(e[21]=[i(" 查看 ",-1)])]),_:1},8,["onClick","icon"]),a(o,{type:"success",size:"small",onClick:S=>R(n.row),icon:z(ge)},{default:l(()=>[...e[22]||(e[22]=[i(" 编辑 ",-1)])]),_:1},8,["onClick","icon"]),a(le,{onCommand:S=>O(S,n.row)},{dropdown:l(()=>[a(ae,null,{default:l(()=>[a(N,{command:"status"},{default:l(()=>[...e[24]||(e[24]=[i(" 变更状态 ",-1)])]),_:1}),a(N,{command:"delete"},{default:l(()=>[...e[25]||(e[25]=[i(" 删除 ",-1)])]),_:1})]),_:1})]),default:l(()=>[a(o,{size:"small",icon:z(_e)},{default:l(()=>[...e[23]||(e[23]=[i(" 更多 ",-1)])]),_:1},8,["icon"])]),_:1},8,["onCommand"])]),_:1})]),_:1},8,["data"])),[[se,A.value]]),V("div",xe,[a(ne,{"current-page":g.value,"onUpdate:currentPage":e[8]||(e[8]=n=>g.value=n),"page-size":C.value,"onUpdate:pageSize":e[9]||(e[9]=n=>C.value=n),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:W,onCurrentChange:X},null,8,["current-page","page-size","total"])])]),_:1}),a(oe,{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=n=>x.value=n),title:"变更教师状态",width:"400px"},{footer:l(()=>[V("span",ke,[a(o,{onClick:e[12]||(e[12]=n=>x.value=!1)},{default:l(()=>[...e[26]||(e[26]=[i("取消",-1)])]),_:1}),a(o,{type:"primary",onClick:H},{default:l(()=>[...e[27]||(e[27]=[i("确定",-1)])]),_:1})])]),default:l(()=>[a(Y,{model:m.value,"label-width":"80px"},{default:l(()=>[a(f,{label:"当前状态"},{default:l(()=>[a(M,{type:$(w.value.status)},{default:l(()=>[i(q(w.value.status),1)]),_:1},8,["type"])]),_:1}),a(f,{label:"新状态",required:""},{default:l(()=>[a(k,{modelValue:m.value.status,"onUpdate:modelValue":e[10]||(e[10]=n=>m.value.status=n),placeholder:"请选择新状态"},{default:l(()=>[a(u,{label:"在职",value:"在职"}),a(u,{label:"请假",value:"请假"}),a(u,{label:"离职",value:"离职"})]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"变更原因",required:""},{default:l(()=>[a(c,{modelValue:m.value.reason,"onUpdate:modelValue":e[11]||(e[11]=n=>m.value.reason=n),type:"textarea",placeholder:"请输入变更原因",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Se=be(Te,[["__scopeId","data-v-c518a4ad"]]);export{Se as default};
