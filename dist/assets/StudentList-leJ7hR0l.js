import{d as be,y as d,c as P,a as p,b as e,w as t,r as s,l as n,u as c,n as we,E as Q,G as he,H as q,$ as ye,I as Ve,M as Ce,N as ke,t as G,x as k,F as xe,k as Se,a0 as De,q as Ue,s as ze,a1 as Te,T as x,U as Be,o as S,_ as Ee}from"./index-Pv0t0kya.js";const Ie={class:"student-list-container"},Me={class:"operation-bar"},Xe={class:"search-box"},$e={class:"student-name-cell"},Ae=["onClick"],Fe={class:"student-tags"},Le={class:"pagination-container"},Re={class:"import-content"},Ne={class:"import-tips"},je={class:"dialog-footer"},Pe={class:"dialog-footer"},Qe=be({__name:"StudentList",setup(qe){const D=Te(),X=d([{id:1,name:"张三",gender:"男",birthday:"2010-05-15",school:"XX小学",grade:"五年级",class:"五(1)班",phone:"13800138001",email:"zhangsan@example.com",status:"在读",enrollmentDate:"2024-09-01",tags:["基础薄弱","积极主动"],createdAt:"2024-09-01 10:00:00"},{id:2,name:"李四",gender:"女",birthday:"2011-03-20",school:"XX中学",grade:"七年级",class:"七(2)班",phone:"13800138002",email:"lisi@example.com",status:"潜在",enrollmentDate:"",tags:["特长科目：数学"],createdAt:"2024-09-02 14:30:00"},{id:3,name:"王五",gender:"男",birthday:"2009-08-10",school:"XX高中",grade:"高一",class:"高一(3)班",phone:"13800138003",email:"wangwu@example.com",status:"毕业",enrollmentDate:"2023-09-01",tags:["学习目标：高考","积极主动"],createdAt:"2023-09-01 09:00:00"}]),$=d(null),H=d(!1),U=d([]),V=d(""),i=d({name:"",gender:"",grade:"",status:"",school:""}),z=d(1),T=d(10),J=d(X.value.length),g=d(!1),K=d(),C=d([]),b=d(!1),w=d({status:""}),_=d({status:"",reason:""}),A=o=>({潜在:"info",在读:"success",停学:"warning",毕业:"primary",流失:"danger"})[o]||"info",O=o=>{U.value=o.map(l=>l.id)},B=()=>{console.log("搜索学生：",{...i.value,searchQuery:V.value})},W=()=>{i.value={name:"",gender:"",grade:"",status:"",school:""},V.value="",B()},Y=()=>{D.push("/student/add")},F=o=>{D.push(`/student/detail/${o.id}`)},Z=o=>{D.push(`/student/detail/${o.id}?mode=edit`)},ee=o=>{w.value=o,_.value={status:o.status,reason:""},b.value=!0},L=o=>{const l=o?[o.id]:U.value;l.length!==0&&Be.confirm("确定要删除选中的学生吗？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除学生：",l),x.success("删除成功")}).catch(()=>{})},le=()=>{g.value=!0},te=()=>{console.log("导出学生")},ae=()=>{console.log("标签管理")},oe=o=>{C.value=[o]},ne=()=>{console.log("下载模板")},se=()=>{if(C.value.length===0){x.warning("请选择要导入的文件");return}console.log("导入学生：",C.value[0]),g.value=!1,x.success("导入成功")},de=()=>{console.log("变更状态：",w.value.id,_.value),w.value.status=_.value.status,b.value=!1,x.success("状态变更成功")},ue=o=>{T.value=o,console.log("每页条数：",o)},ie=o=>{z.value=o,console.log("当前页码：",o)},re=(o,l)=>{o&&($.value=l)},pe=o=>{const l=$.value;switch(o){case"view":F(l);break;case"edit":Z(l);break;case"status":ee(l);break;case"delete":L(l);break}};return(o,l)=>{const m=s("el-icon"),u=s("el-button"),h=s("el-input"),v=s("el-form-item"),f=s("el-option"),E=s("el-select"),R=s("el-form"),N=s("el-card"),r=s("el-table-column"),I=s("el-tag"),M=s("el-dropdown-item"),me=s("el-dropdown-menu"),fe=s("el-dropdown"),ce=s("el-table"),ve=s("el-pagination"),_e=s("el-upload"),j=s("el-dialog"),ge=ke("loading");return S(),P("div",Ie,[l[33]||(l[33]=p("h2",{class:"page-title"},"学生列表",-1)),p("div",Me,[e(u,{type:"primary",onClick:Y},{default:t(()=>[e(m,null,{default:t(()=>[e(c(we))]),_:1}),l[14]||(l[14]=n(" 新增学生 ",-1))]),_:1}),e(u,{type:"success",onClick:le},{default:t(()=>[e(m,null,{default:t(()=>[e(c(Q))]),_:1}),l[15]||(l[15]=n(" 导入学生 ",-1))]),_:1}),e(u,{type:"warning",onClick:te},{default:t(()=>[e(m,null,{default:t(()=>[e(c(he))]),_:1}),l[16]||(l[16]=n(" 导出学生 ",-1))]),_:1}),e(u,{type:"danger",onClick:L,disabled:U.value.length===0},{default:t(()=>[e(m,null,{default:t(()=>[e(c(q))]),_:1}),l[17]||(l[17]=n(" 批量删除 ",-1))]),_:1},8,["disabled"]),e(u,{type:"info",onClick:ae},{default:t(()=>[e(m,null,{default:t(()=>[e(c(ye))]),_:1}),l[18]||(l[18]=n(" 标签管理 ",-1))]),_:1}),p("div",Xe,[e(h,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=a=>V.value=a),placeholder:"请输入学生姓名或手机号",class:"search-input",clearable:""},{append:t(()=>[e(u,{type:"primary",onClick:B},{default:t(()=>[e(m,null,{default:t(()=>[e(c(Ve))]),_:1}),l[19]||(l[19]=n(" 搜索 ",-1))]),_:1})]),_:1},8,["modelValue"])])]),e(N,{shadow:"hover",class:"filter-card"},{default:t(()=>[e(R,{inline:!0,model:i.value,class:"filter-form"},{default:t(()=>[e(v,{label:"姓名"},{default:t(()=>[e(h,{modelValue:i.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value.name=a),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(v,{label:"性别",class:"gender-select"},{default:t(()=>[e(E,{modelValue:i.value.gender,"onUpdate:modelValue":l[2]||(l[2]=a=>i.value.gender=a),placeholder:"请选择性别",clearable:""},{default:t(()=>[e(f,{label:"男",value:"男"}),e(f,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"年级"},{default:t(()=>[e(h,{modelValue:i.value.grade,"onUpdate:modelValue":l[3]||(l[3]=a=>i.value.grade=a),placeholder:"请输入年级",clearable:""},null,8,["modelValue"])]),_:1}),e(v,{label:"在读状态",class:"status-select"},{default:t(()=>[e(E,{modelValue:i.value.status,"onUpdate:modelValue":l[4]||(l[4]=a=>i.value.status=a),placeholder:"请选择在读状态",clearable:""},{default:t(()=>[e(f,{label:"潜在",value:"潜在"}),e(f,{label:"在读",value:"在读"}),e(f,{label:"停学",value:"停学"}),e(f,{label:"毕业",value:"毕业"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"学校"},{default:t(()=>[e(h,{modelValue:i.value.school,"onUpdate:modelValue":l[5]||(l[5]=a=>i.value.school=a),placeholder:"请输入学校",clearable:""},null,8,["modelValue"])]),_:1}),e(v,{class:"filter-buttons"},{default:t(()=>[e(u,{type:"primary",onClick:B},{default:t(()=>[...l[20]||(l[20]=[n("查询",-1)])]),_:1}),e(u,{onClick:W},{default:t(()=>[...l[21]||(l[21]=[n("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{shadow:"hover",class:"student-table-card"},{default:t(()=>[Ce((S(),G(ce,{data:X.value,onSelectionChange:O,stripe:"",border:""},{default:t(()=>[e(r,{type:"selection",width:"55"}),e(r,{prop:"id",label:"ID",width:"80"}),e(r,{prop:"name",label:"姓名",width:"120"},{default:t(a=>[p("div",$e,[p("a",{class:"student-name-link",href:"javascript:void(0)",onClick:y=>F(a.row)},k(a.row.name),9,Ae),p("div",Fe,[(S(!0),P(xe,null,Se(a.row.tags,y=>(S(),G(I,{key:y,size:"small",type:"info"},{default:t(()=>[n(k(y),1)]),_:2},1024))),128))])])]),_:1}),e(r,{prop:"gender",label:"性别",width:"80"}),e(r,{prop:"birthday",label:"出生日期",width:"150"}),e(r,{prop:"school",label:"学校",width:"150"}),e(r,{prop:"grade",label:"年级",width:"100"}),e(r,{prop:"class",label:"班级",width:"100"}),e(r,{prop:"phone",label:"联系方式",width:"150"}),e(r,{prop:"status",label:"在读状态",width:"120"},{default:t(a=>[e(I,{type:A(a.row.status)},{default:t(()=>[n(k(a.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"enrollmentDate",label:"入学日期",width:"150"}),e(r,{prop:"createdAt",label:"创建时间",width:"180"}),e(r,{label:"操作",width:"120",fixed:"right"},{default:t(a=>[e(fe,{onCommand:pe,onVisibleChange:y=>re(y,a.row)},{dropdown:t(()=>[e(me,null,{default:t(()=>[e(M,{command:"edit"},{default:t(()=>[e(m,null,{default:t(()=>[e(c(Ue))]),_:1}),l[22]||(l[22]=n(" 编辑 ",-1))]),_:1}),e(M,{command:"status"},{default:t(()=>[e(m,null,{default:t(()=>[e(c(ze))]),_:1}),l[23]||(l[23]=n(" 变更状态 ",-1))]),_:1}),e(M,{command:"delete",disabled:a.row.status==="在读",divided:"",class:"dropdown-item-danger"},{default:t(()=>[e(m,null,{default:t(()=>[e(c(q))]),_:1}),l[24]||(l[24]=n(" 删除 ",-1))]),_:1},8,["disabled"])]),_:2},1024)]),default:t(()=>[e(m,null,{default:t(()=>[e(c(De))]),_:1})]),_:2},1032,["onVisibleChange"])]),_:1})]),_:1},8,["data"])),[[ge,H.value]]),p("div",Le,[e(ve,{"current-page":z.value,"onUpdate:currentPage":l[6]||(l[6]=a=>z.value=a),"page-size":T.value,"onUpdate:pageSize":l[7]||(l[7]=a=>T.value=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:J.value,onSizeChange:ue,onCurrentChange:ie},null,8,["current-page","page-size","total"])])]),_:1}),e(j,{modelValue:g.value,"onUpdate:modelValue":l[9]||(l[9]=a=>g.value=a),title:"导入学生",width:"600px","close-on-click-modal":!1},{footer:t(()=>[p("div",je,[e(u,{onClick:l[8]||(l[8]=a=>g.value=!1)},{default:t(()=>[...l[29]||(l[29]=[n("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:se},{default:t(()=>[...l[30]||(l[30]=[n("导入",-1)])]),_:1})])]),default:t(()=>[p("div",Re,[e(_e,{ref_key:"uploadRef",ref:K,"auto-upload":!1,"on-change":oe,"file-list":C.value,accept:".xlsx, .xls"},{default:t(()=>[e(u,{type:"primary"},{default:t(()=>[e(m,null,{default:t(()=>[e(c(Q))]),_:1}),l[25]||(l[25]=n(" 选择文件 ",-1))]),_:1})]),_:1},8,["file-list"]),p("div",Ne,[l[27]||(l[27]=p("p",null,"• 支持 .xlsx, .xls 格式文件",-1)),l[28]||(l[28]=p("p",null,"• 请下载模板文件，按照模板格式填写数据",-1)),e(u,{type:"text",onClick:ne},{default:t(()=>[...l[26]||(l[26]=[n("下载模板",-1)])]),_:1})])])]),_:1},8,["modelValue"]),e(j,{modelValue:b.value,"onUpdate:modelValue":l[13]||(l[13]=a=>b.value=a),title:"变更状态",width:"400px","close-on-click-modal":!1},{footer:t(()=>[p("div",Pe,[e(u,{onClick:l[12]||(l[12]=a=>b.value=!1)},{default:t(()=>[...l[31]||(l[31]=[n("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:de},{default:t(()=>[...l[32]||(l[32]=[n("保存",-1)])]),_:1})])]),default:t(()=>[e(R,{model:_.value,"label-width":"100px"},{default:t(()=>[e(v,{label:"当前状态"},{default:t(()=>[e(I,{type:A(w.value.status)},{default:t(()=>[n(k(w.value.status),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"目标状态",prop:"status"},{default:t(()=>[e(E,{modelValue:_.value.status,"onUpdate:modelValue":l[10]||(l[10]=a=>_.value.status=a),placeholder:"请选择目标状态"},{default:t(()=>[e(f,{label:"潜在",value:"潜在"}),e(f,{label:"在读",value:"在读"}),e(f,{label:"停学",value:"停学"}),e(f,{label:"毕业",value:"毕业"}),e(f,{label:"流失",value:"流失"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"变更原因",prop:"reason"},{default:t(()=>[e(h,{modelValue:_.value.reason,"onUpdate:modelValue":l[11]||(l[11]=a=>_.value.reason=a),type:"textarea",placeholder:"请输入变更原因",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),He=Ee(Qe,[["__scopeId","data-v-6394a773"]]);export{He as default};
