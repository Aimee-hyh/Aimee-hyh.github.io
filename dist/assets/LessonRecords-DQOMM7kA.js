import{d as te,y as p,z as oe,c as ne,a as m,b as e,w as t,r as d,l as c,u as U,n as de,M as ue,N as se,t as F,x as C,P as re,q as ie,C as me,a1 as pe,o as j,T as h,_ as ve}from"./index-Pv0t0kya.js";const ce={class:"lesson-records-container"},be={class:"page-header"},fe={class:"header-actions"},_e={class:"pagination"},ge={class:"attendance-info"},Ve={class:"attendance-item"},we={class:"attendance-item"},ke={class:"attendance-item"},ye={class:"value"},xe={class:"dialog-footer"},Ne=te({__name:"LessonRecords",setup(Ce){const T=pe(),I=p(!1),u=p({dateRange:[],subject:"",className:""}),f=p(1),V=p(10),Y=p(0),w=p([{id:1,date:"2024-03-20",subject:"语文",className:"八年级(1)班",topic:"《背影》课文分析",duration:45,attendance:{total:45,attended:43,absent:2},content:"讲解了《背影》的写作背景、主题思想和艺术特色，重点分析了父亲的人物形象和文中的细节描写。",homework:"1. 完成课后练习题；2. 写一篇关于父爱的作文",reflection:"课堂氛围良好，学生参与度高，但部分学生对细节描写的理解还不够深入，需要在后续课程中加强训练。",evaluation:4.9},{id:2,date:"2024-03-19",subject:"语文",className:"七年级(2)班",topic:"修辞手法讲解",duration:45,attendance:{total:42,attended:41,absent:1},content:"讲解了比喻、拟人、夸张等修辞手法的定义和用法，并通过实例分析帮助学生理解。",homework:"找出课文中使用修辞手法的句子并分析其作用",reflection:"学生对修辞手法的兴趣较高，参与互动积极，教学效果良好。",evaluation:4.8},{id:3,date:"2024-03-18",subject:"语文",className:"六年级(3)班",topic:"作文写作指导",duration:45,attendance:{total:40,attended:39,absent:1},content:"指导学生如何写好一篇记叙文，包括选材、结构安排和语言表达等方面。",homework:"完成一篇题为《我的校园》的记叙文",reflection:"部分学生对作文结构的掌握还不够好，需要在下次课中进行针对性训练。",evaluation:4.7}]),P=oe(()=>{let n=[...w.value];if(u.value.dateRange&&u.value.dateRange.length===2){const g=new Date(u.value.dateRange[0]),y=new Date(u.value.dateRange[1]);n=n.filter(s=>{const i=new Date(s.date);return i>=g&&i<=y})}u.value.subject&&(n=n.filter(g=>g.subject===u.value.subject)),u.value.className&&(n=n.filter(g=>g.className===u.value.className)),Y.value=n.length;const l=(f.value-1)*V.value,v=l+V.value;return n.slice(l,v)}),_=p(!1),r=p(!0),k=p("新增课堂记录"),z=p(),o=p({id:0,date:"",subject:"",className:"",topic:"",duration:45,attendance:{total:0,attended:0,absent:0},content:"",homework:"",reflection:"",evaluation:5}),$={date:[{required:!0,message:"请选择日期",trigger:"change"}],subject:[{required:!0,message:"请选择科目",trigger:"change"}],className:[{required:!0,message:"请选择班级",trigger:"change"}],topic:[{required:!0,message:"请输入授课主题",trigger:"blur"}],content:[{required:!0,message:"请输入授课内容",trigger:"blur"}]},L=()=>{T.push("/teacher/portal")},M=()=>{f.value=1,console.log("搜索课堂记录：",u.value)},A=()=>{u.value={dateRange:[],subject:"",className:""},f.value=1,M()},O=()=>{r.value=!0,k.value="新增课堂记录",o.value={id:0,date:new Date().toISOString().split("T")[0],subject:"",className:"",topic:"",duration:45,attendance:{total:0,attended:0,absent:0},content:"",homework:"",reflection:"",evaluation:5},_.value=!0},G=n=>{r.value=!1,k.value="课堂记录详情",o.value={...n},_.value=!0},H=n=>{r.value=!0,k.value="编辑课堂记录",o.value={...n},_.value=!0},J=async()=>{try{if(await z.value.validate(),o.value.attendance.absent=o.value.attendance.total-o.value.attendance.attended,o.value.id===0)o.value.id=w.value.length+1,w.value.unshift(o.value),h.success("新增记录成功");else{const n=w.value.findIndex(l=>l.id===o.value.id);n!==-1&&(w.value[n]=o.value,h.success("更新记录成功"))}_.value=!1}catch(n){console.error("表单验证失败：",n),h.error("表单验证失败，请检查必填项")}},K=n=>{V.value=n,f.value=1},Q=n=>{f.value=n};return(n,l)=>{const v=d("el-button"),g=d("el-icon"),y=d("el-date-picker"),s=d("el-form-item"),i=d("el-option"),x=d("el-select"),S=d("el-form"),q=d("el-card"),b=d("el-table-column"),W=d("el-tag"),B=d("el-rate"),X=d("el-table"),Z=d("el-pagination"),E=d("el-col"),N=d("el-input"),R=d("el-input-number"),ee=d("el-row"),le=d("el-dialog"),ae=se("loading");return j(),ne("div",ce,[m("div",be,[l[20]||(l[20]=m("h2",{class:"page-title"},"课堂记录",-1)),m("div",fe,[e(v,{onClick:L},{default:t(()=>[...l[18]||(l[18]=[c("返回门户",-1)])]),_:1}),e(v,{type:"primary",onClick:O},{default:t(()=>[e(g,null,{default:t(()=>[e(U(de))]),_:1}),l[19]||(l[19]=c(" 新增记录 ",-1))]),_:1})])]),e(q,{shadow:"hover",class:"filter-card"},{default:t(()=>[e(S,{model:u.value,inline:""},{default:t(()=>[e(s,{label:"日期范围"},{default:t(()=>[e(y,{modelValue:u.value.dateRange,"onUpdate:modelValue":l[0]||(l[0]=a=>u.value.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(s,{label:"科目"},{default:t(()=>[e(x,{modelValue:u.value.subject,"onUpdate:modelValue":l[1]||(l[1]=a=>u.value.subject=a),placeholder:"请选择科目"},{default:t(()=>[e(i,{label:"语文",value:"语文"}),e(i,{label:"数学",value:"数学"}),e(i,{label:"英语",value:"英语"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"班级"},{default:t(()=>[e(x,{modelValue:u.value.className,"onUpdate:modelValue":l[2]||(l[2]=a=>u.value.className=a),placeholder:"请选择班级"},{default:t(()=>[e(i,{label:"八年级(1)班",value:"八年级(1)班"}),e(i,{label:"七年级(2)班",value:"七年级(2)班"}),e(i,{label:"六年级(3)班",value:"六年级(3)班"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(v,{type:"primary",onClick:M},{default:t(()=>[...l[21]||(l[21]=[c("查询",-1)])]),_:1}),e(v,{onClick:A},{default:t(()=>[...l[22]||(l[22]=[c("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(q,{shadow:"hover",class:"records-card"},{default:t(()=>[ue((j(),F(X,{data:P.value,style:{width:"100%"},stripe:"",border:""},{default:t(()=>[e(b,{type:"index",label:"序号",width:"60"}),e(b,{prop:"date",label:"日期",width:"120"}),e(b,{prop:"subject",label:"科目",width:"100"}),e(b,{prop:"className",label:"班级",width:"120"}),e(b,{prop:"topic",label:"授课主题","min-width":"150"}),e(b,{prop:"attendance",label:"出勤情况",width:"120"},{default:t(a=>[c(C(a.row.attendance.attended)+"/"+C(a.row.attendance.total)+"人 ",1)]),_:1}),e(b,{prop:"homework",label:"作业布置",width:"150"},{default:t(a=>[e(W,{type:a.row.homework?"success":"warning"},{default:t(()=>[c(C(a.row.homework?"已布置":"未布置"),1)]),_:2},1032,["type"])]),_:1}),e(b,{prop:"evaluation",label:"教学评价",width:"100"},{default:t(a=>[e(B,{modelValue:a.row.evaluation,"onUpdate:modelValue":D=>a.row.evaluation=D,disabled:"",max:5},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(b,{label:"操作",width:"150",fixed:"right"},{default:t(a=>[e(v,{type:"primary",size:"small",onClick:D=>G(a.row),icon:U(re)},{default:t(()=>[...l[23]||(l[23]=[c(" 查看 ",-1)])]),_:1},8,["onClick","icon"]),e(v,{type:"success",size:"small",onClick:D=>H(a.row),icon:U(ie)},{default:t(()=>[...l[24]||(l[24]=[c(" 编辑 ",-1)])]),_:1},8,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[ae,I.value]]),m("div",_e,[e(Z,{"current-page":f.value,"onUpdate:currentPage":l[3]||(l[3]=a=>f.value=a),"page-size":V.value,"onUpdate:pageSize":l[4]||(l[4]=a=>V.value=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:Y.value,onSizeChange:K,onCurrentChange:Q},null,8,["current-page","page-size","total"])])]),_:1}),e(le,{modelValue:_.value,"onUpdate:modelValue":l[17]||(l[17]=a=>_.value=a),title:k.value,width:"600px"},{footer:t(()=>[m("span",xe,[e(v,{onClick:l[16]||(l[16]=a=>_.value=!1)},{default:t(()=>[...l[29]||(l[29]=[c("取消",-1)])]),_:1}),r.value?(j(),F(v,{key:0,type:"primary",onClick:J},{default:t(()=>[...l[30]||(l[30]=[c("确定",-1)])]),_:1})):me("",!0)])]),default:t(()=>[e(S,{ref_key:"recordFormRef",ref:z,model:o.value,"label-width":"120px",rules:$},{default:t(()=>[e(ee,{gutter:20},{default:t(()=>[e(E,{span:12},{default:t(()=>[e(s,{label:"日期",prop:"date"},{default:t(()=>[e(y,{modelValue:o.value.date,"onUpdate:modelValue":l[5]||(l[5]=a=>o.value.date=a),type:"date",placeholder:"请选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",disabled:!r.value},null,8,["modelValue","disabled"])]),_:1}),e(s,{label:"科目",prop:"subject"},{default:t(()=>[e(x,{modelValue:o.value.subject,"onUpdate:modelValue":l[6]||(l[6]=a=>o.value.subject=a),placeholder:"请选择科目",disabled:!r.value},{default:t(()=>[e(i,{label:"语文",value:"语文"}),e(i,{label:"数学",value:"数学"}),e(i,{label:"英语",value:"英语"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(s,{label:"班级",prop:"className"},{default:t(()=>[e(x,{modelValue:o.value.className,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.className=a),placeholder:"请选择班级",disabled:!r.value},{default:t(()=>[e(i,{label:"八年级(1)班",value:"八年级(1)班"}),e(i,{label:"七年级(2)班",value:"七年级(2)班"}),e(i,{label:"六年级(3)班",value:"六年级(3)班"})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(E,{span:12},{default:t(()=>[e(s,{label:"授课主题",prop:"topic"},{default:t(()=>[e(N,{modelValue:o.value.topic,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value.topic=a),placeholder:"请输入授课主题",disabled:!r.value},null,8,["modelValue","disabled"])]),_:1}),e(s,{label:"教学评价",prop:"evaluation"},{default:t(()=>[e(B,{modelValue:o.value.evaluation,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value.evaluation=a),max:5,disabled:!r.value},null,8,["modelValue","disabled"])]),_:1}),e(s,{label:"课堂时长"},{default:t(()=>[e(R,{modelValue:o.value.duration,"onUpdate:modelValue":l[10]||(l[10]=a=>o.value.duration=a),min:1,max:240,disabled:!r.value},null,8,["modelValue","disabled"]),l[25]||(l[25]=m("span",{style:{"margin-left":"8px"}},"分钟",-1))]),_:1})]),_:1})]),_:1}),e(s,{label:"出勤情况"},{default:t(()=>[m("div",ge,[m("div",Ve,[l[26]||(l[26]=m("span",{class:"label"},"应到人数：",-1)),e(R,{modelValue:o.value.attendance.total,"onUpdate:modelValue":l[11]||(l[11]=a=>o.value.attendance.total=a),min:1,disabled:!r.value},null,8,["modelValue","disabled"])]),m("div",we,[l[27]||(l[27]=m("span",{class:"label"},"实到人数：",-1)),e(R,{modelValue:o.value.attendance.attended,"onUpdate:modelValue":l[12]||(l[12]=a=>o.value.attendance.attended=a),min:0,max:o.value.attendance.total,disabled:!r.value},null,8,["modelValue","max","disabled"])]),m("div",ke,[l[28]||(l[28]=m("span",{class:"label"},"缺勤人数：",-1)),m("span",ye,C(o.value.attendance.total-o.value.attendance.attended),1)])])]),_:1}),e(s,{label:"授课内容",prop:"content"},{default:t(()=>[e(N,{modelValue:o.value.content,"onUpdate:modelValue":l[13]||(l[13]=a=>o.value.content=a),type:"textarea",placeholder:"请输入授课内容",rows:"4",disabled:!r.value},null,8,["modelValue","disabled"])]),_:1}),e(s,{label:"作业布置",prop:"homework"},{default:t(()=>[e(N,{modelValue:o.value.homework,"onUpdate:modelValue":l[14]||(l[14]=a=>o.value.homework=a),type:"textarea",placeholder:"请输入作业布置",rows:"3",disabled:!r.value},null,8,["modelValue","disabled"])]),_:1}),e(s,{label:"教学反思"},{default:t(()=>[e(N,{modelValue:o.value.reflection,"onUpdate:modelValue":l[15]||(l[15]=a=>o.value.reflection=a),type:"textarea",placeholder:"请输入教学反思",rows:"3",disabled:!r.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),De=ve(Ne,[["__scopeId","data-v-aaee6740"]]);export{De as default};
